on_actions = {
	on_startup = {
		effect = {
			USA = {
				set_variable = { THIS.db_national_inflation = 1 }
				set_variable = { THIS.db_currency_name = "American Dollar" }
			}
			GER = {
				set_variable = { THIS.db_national_inflation = 4.19 }
				set_variable = { THIS.db_currency_name = "Reichsmark" }
			}

			GRE = {
				set_variable = { THIS.db_national_inflation = 76.62 }
				set_variable = { THIS.db_currency_name = "Drachma" }
			}

			COL = {
				set_variable = { THIS.db_national_inflation = 1.02 }
				set_variable = { THIS.db_currency_name = "Colombian Peso" }
			}

			ECU = {
				set_variable = { THIS.db_national_inflation = 5.02 }
				set_variable = { THIS.db_currency_name = "Sucre" }
			}

			PER = {
				set_variable = { THIS.db_national_inflation = 0.25 }
				set_variable = { THIS.db_currency_name = "Libra" }
			}

			VEN = {
				set_variable = { THIS.db_national_inflation = 5.19 }
				set_variable = { THIS.db_currency_name = "Bolivar" }
			}

			TUR = {
				set_variable = { THIS.db_national_inflation = 1.91 }
				set_variable = { THIS.db_currency_name = "Turkish pound" }
			}

			AUS = {
				set_variable = { THIS.db_national_inflation = 7.11 }
				set_variable = { THIS.db_currency_name = "Schilling" }
			}

			BEL = {
				set_variable = { THIS.db_national_inflation = 7.18 }
				set_variable = { THIS.db_currency_name = "Belga" }
			}

			BUL = {
				set_variable = { THIS.db_national_inflation = 138.74 }
				set_variable = { THIS.db_currency_name = "Lev" }
			}

			CZE = {
				set_variable = { THIS.db_national_inflation = 33.75 }
				set_variable = { THIS.db_currency_name = "Crown" }
			}

			DEN = {
				set_variable = { THIS.db_national_inflation = 3.74 }
				set_variable = { THIS.db_currency_name = "Krone" }
			}

			ENG = {
				set_variable = { THIS.db_national_inflation = 2.03 }
				set_variable = { THIS.db_currency_name = "Pound" }
			}

			FIN = {
				set_variable = { THIS.db_national_inflation = 39.76 }
				set_variable = { THIS.db_currency_name = "Markka" }
			}

			FRA = {
				set_variable = { THIS.db_national_inflation = 25.52 }
				set_variable = { THIS.db_currency_name = "Franc" }
			}

			HOL = {
				set_variable = { THIS.db_national_inflation = 2.49 }
				set_variable = { THIS.db_currency_name = "Florin" }
			}

			HUN = {
				set_variable = { THIS.db_national_inflation = 5.73 }
				set_variable = { THIS.db_currency_name = "Pengo" }
			}

			ITA = {
				set_variable = { THIS.db_national_inflation = 19.38 }
				set_variable = { THIS.db_currency_name = "Lira" }
			}

			NOR = {
				set_variable = { THIS.db_national_inflation = 3.84 }
				set_variable = { THIS.db_currency_name = "Krone" }
			}

			POL = {
				set_variable = { THIS.db_national_inflation = 3.19 }
				set_variable = { THIS.db_currency_name = "Zloty" }
			}

			POR = {
				set_variable = { THIS.db_national_inflation = 19.89 }
				set_variable = { THIS.db_currency_name = "Escudo" }
			}

			ROM = {
				set_variable = { THIS.db_national_inflation = 166.67 }
				set_variable = { THIS.db_currency_name = "Leu" }
			}

			SOV = {
				set_variable = { THIS.db_national_inflation = 0.19 }
				set_variable = { THIS.db_currency_name = "Chervonetz" }
			}

			SPA = {
				set_variable = { THIS.db_national_inflation = 5.86 }
				set_variable = { THIS.db_currency_name = "Peseta" }
			}

			SWE = {
				set_variable = { THIS.db_national_inflation = 3.72 }
				set_variable = { THIS.db_currency_name = "Krona" }
			}

			SWI = {
				set_variable = { THIS.db_national_inflation = 5.19 }
				set_variable = { THIS.db_currency_name = "Franc" }
			}

			YUG = {
				set_variable = { THIS.db_national_inflation = 57.14 }
				set_variable = { THIS.db_currency_name = "Dinar" }
			}

			CAN = {
				set_variable = { THIS.db_national_inflation = 1.0003 }
				set_variable = { THIS.db_currency_name = "Dollar" }
			}

			CUB = {
				set_variable = { THIS.db_national_inflation = 1.0003 }
				set_variable = { THIS.db_currency_name = "Cuban Peso" }
			}

			MEX = {
				set_variable = { THIS.db_national_inflation = 2.12 }
				set_variable = { THIS.db_currency_name = "Mexican Peso" }
			}

			ARG = {
				set_variable = { THIS.db_national_inflation = 1.04 }
				set_variable = { THIS.db_currency_name = "Argentinian Peso" }
			}

			BRA = {
				set_variable = { THIS.db_national_inflation = 8.45 }
				set_variable = { THIS.db_currency_name = "Milreis" }
			}

			CHI = {
				set_variable = { THIS.db_national_inflation = 8.29 }
				set_variable = { THIS.db_currency_name = "Chilean Peso" }
			}

			RAJ = {
				set_variable = { THIS.db_national_inflation = 2.75 }
				set_variable = { THIS.db_currency_name = "Rupee" }
			}

			JAP = {
				set_variable = { THIS.db_national_inflation = 2.11 }
				set_variable = { THIS.db_currency_name = "Yen" }
			}
			TUR = {
				set_variable = { THIS.db_national_inflation = 1.91 }
				set_variable = { THIS.db_currency_name = "Turkish pound" }
			}
			every_country = {
				if = {
					limit = { 
						NOT = {
							OR = {
								tag = USA
								tag = GER
								tag = GRE
								tag = COL
								tag = ECU
								tag = PER
								tag = VEN
								tag = TUR
								tag = AUT
								tag = BEL
								tag = BUL
								tag = CZE
								tag = DEN
								tag = ENG
								tag = FIN
								tag = FRA
								tag = HOL
								tag = HUN
								tag = ITA
								tag = NOR
								tag = POL
								tag = POR
								tag = ROM
								tag = SOV
								tag = SPA
								tag = SWE
								tag = SWI
								tag = YUG
								tag = CAN
								tag = CUB
								tag = MEX
								tag = ARG
								tag = BRA
								tag = CHI
								tag = RAJ
								tag = JAP
							}
						}
					}
					set_variable = { THIS.db_national_inflation = 1 }
				}
				set_variable = { THIS.db_national_minimum_wage = 0.25 }
				multiply_variable = { THIS.db_national_minimum_wage = THIS.db_national_inflation }				
				set_variable = { THIS.db_national_work_hours_per_day = 8 }
				set_variable = { THIS.db_national_taxation_rate = 0.05 }
				set_variable = { THIS.db_national_lfpr_base = 0.40 }
				set_variable = { THIS.db_national_inflation_since_1936 = 1 }
				set_variable = { THIS.db_national_interest_rate_base = 0.03 }
				set_variable = { THIS.db_national_lfpr = .4 }
				set_variable = { THIS.db_state_employment_modifier = 1 }
				set_variable = { THIS.db_national_lfpr = THIS.db_national_lfpr_base }
				set_variable = { THIS.db_national_price_total = 1 }
				add_dynamic_modifier = {
					modifier = db_consumer_demand
				}
				set_country_flag = db_economic_hidden_flag
				every_state = {
					limit = { is_owned_by = PREV }
					if = { limit = { has_state_category = city } set_variable = { var = THIS.db_state_base_wealth value = 6 } }
					if = { limit = { has_state_category = large_city } set_variable = { var = THIS.db_state_base_wealth value = 7 } }
					if = { limit = { has_state_category = megalopolis } set_variable = { var = THIS.db_state_base_wealth value = 8 } }
					if = { limit = { has_state_category = metropolis } set_variable = { var = THIS.db_state_base_wealth value = 9 } }
					if = { limit = { has_state_category = enclave } set_variable = { var = THIS.db_state_base_wealth value = 6 } }
					if = { limit = { has_state_category = large_town } set_variable = { var = THIS.db_state_base_wealth value = 5 } }
					if = { limit = { has_state_category = pastoral } set_variable = { var = THIS.db_state_base_wealth value = 3 } }
					if = { limit = { OR = { has_state_category = rural has_state_category = small_island has_state_category = tiny_island has_state_category = town } } set_variable = { var = THIS.db_state_base_wealth value = 4 } }
					if = { limit = { has_state_category = wasteland } set_variable = { var = THIS.db_state_base_wealth value = 1 } }
					set_variable = { var = THIS.db_state_base_jobs_percent value = THIS.db_state_base_wealth }
					clamp_variable = { 
						var = THIS.db_state_base_jobs_percent 
						min = 2 
						max = 7 
					}
					add_to_variable = { THIS.db_state_base_jobs_percent = 0.5 }
					divide_variable = { THIS.db_state_base_jobs_percent = 10 }
					set_variable = { THIS.db_state_lfpr = THIS.state_population_k }
					multiply_variable = { THIS.db_state_lfpr = PREV.db_national_lfpr }
					set_variable = { THIS.db_state_base_total_employed = THIS.db_state_lfpr }
					multiply_variable = { var = THIS.db_state_base_total_employed value = THIS.db_state_base_jobs_percent }
					set_variable = { THIS.db_state_base_wage_modifier = THIS.db_state_base_wealth }
					divide_variable = { THIS.db_state_base_wage_modifier = 10 }
					clamp_variable = { 
						var = THIS.db_state_base_wage_modifier
						min = 0.1
						max = 1
					}
					set_variable = { THIS.db_state_base_cost_of_living_modifier = THIS.db_state_base_wealth }
					set_variable = { THIS.db_state_cost_of_living = THIS.db_state_base_cost_of_living_modifier }
					add_to_variable = { THIS.db_state_base_cost_of_living_modifier = .25 }
					divide_variable = { THIS.db_state_base_cost_of_living_modifier = 10 }
				
				# STARTING DEBT
					set_variable = { THIS.db_state_debt_base = THIS.state_population_k }
					set_variable = { THIS.db_state_debt_base_factor = 0.915 } #.4x366.9x-1000
					multiply_variable = { THIS.db_state_debt_base_factor = THIS.db_state_base_cost_of_living_modifier } 
					multiply_variable = { THIS.db_state_debt_base_factor = PREV.db_national_inflation }
					multiply_variable = { THIS.db_state_debt_base = THIS.db_state_debt_base_factor }
										
                    add_to_array = {
                        array = THIS.db_state_consumer_debt_savings_overflow_check
                        value = THIS.db_state_consumer_debt_savings_var
                        index = 0
                    }
                    add_to_array = {
                        array = THIS.db_state_consumer_debt_savings_overflow_check
                        value = THIS.db_state_consumer_debt_savings_var_ten
                        index = 1
                    }
                    add_to_array = {
                        array = THIS.db_state_consumer_debt_savings_overflow_check
                        value = THIS.db_state_consumer_debt_savings_var_hundred
                        index = 2
                    }
                    add_to_array = {
                        array = THIS.db_state_consumer_debt_savings_overflow_check
                        value = THIS.db_state_consumer_debt_savings_var_thousand
                        index = 3
                    }
                    add_to_array = {
                        array = THIS.db_state_consumer_debt_savings_overflow_check
                        value = THIS.db_state_consumer_debt_savings_var_ten_thousand
                        index = 4
                    }
                    add_to_array = {
                        array = THIS.db_state_consumer_debt_savings_overflow_check
                        value = THIS.db_state_consumer_debt_savings_var_hundred_thousand
                        index = 5
                    }
                    add_to_array = {
                        array = THIS.db_state_consumer_debt_savings_overflow_check
                        value = THIS.db_state_consumer_debt_savings_var_million
                        index = 6
                    }
                    add_to_array = {
                        array = THIS.db_state_consumer_debt_savings_overflow_check
                        value = THIS.db_state_consumer_debt_savings_var_ten_million
                        index = 7
                    }
                    add_to_array = {
                        array = THIS.db_state_consumer_debt_savings_overflow_check
                        value = THIS.db_state_consumer_debt_savings_var_hundred_million
                        index = 8
                    }
                    add_to_array = {
                        array = THIS.db_state_consumer_debt_savings_overflow_check
                        value = THIS.db_state_consumer_debt_savings_var_billion
                        index = 9
                    }
                    add_to_array = {
                        array = THIS.db_state_consumer_debt_savings_overflow_check
                        value = THIS.db_state_consumer_debt_savings_var_ten_billion
                        index = 10
                    }
                    add_to_array = {
                        array = THIS.db_state_consumer_debt_savings_overflow_check
                        value = THIS.db_state_consumer_debt_savings_var_hundred_billion
                        index = 11
                    }
                    add_to_array = {
                        array = THIS.db_state_consumer_debt_savings_overflow_check
                        value = THIS.db_state_consumer_debt_savings_var_trillion
                        index = 12
                    }
                    add_to_array = {
                        array = THIS.db_state_consumer_debt_savings_overflow_check
                        value = THIS.db_state_consumer_debt_savings_var_ten_trillion
                        index = 13
                    }
                    add_to_array = {
                        array = THIS.db_state_consumer_debt_savings_overflow_check
                        value = THIS.db_state_consumer_debt_savings_var_hundred_trillion
                        index = 14
                    }
                    add_to_array = {
                        array = THIS.db_state_consumer_debt_savings_overflow_check
                        value = THIS.db_state_consumer_debt_savings_var_imaginary_number
                        index = 15
                    }
                    set_state_flag = db_state_consumer_debt_savings_overflow_check_is_negative
                    for_each_loop = {
                        array = THIS.db_state_consumer_debt_savings_overflow_check
                        value = v
                        log = "[?v] added to array."
                    }
					#add_to_variable = { THIS.db_state_consumer_debt_savings_overflow_check^3 = THIS.db_state_debt_base }
                }


				# CALCULATE NATIONAL TOTAL
					#add_to_variable = { PREV.db_national_consumer_debt_savings = THIS.db_state_consumer_debt_savings }
					#set_variable = { THIS.db_state_consumer_debt_savings_per_capita = THIS.db_state_consumer_debt_savings }
					#divide_variable = { THIS.db_state_consumer_debt_savings_per_capita = THIS.db_state_lfpr }
			}
		}
	}
	
	on_daily = { 
		effect = {
			# TRIGGER HIDDEN EVENTS
			every_country = {
				if = { 
					limit = { has_country_flag = db_economic_hidden_flag }
					country_event = {
						id = db_hidden.1
						days = 1
					}
					clr_country_flag = db_economic_hidden_flag
					log = "db_economic_hidden: daily event successfully fired!"
				}		
			}
			every_state = {
				db_calculate_base_debt = yes
			}
			#calculate and add base debt 
			#every_state = {
			#	if = {
			#		limit = { check_variable = { THIS.db_state_debt_base < -1 } }
			#		add_to_variable = { THIS.db_state_consumer_debt_savings_overflow_check^3 = 1 }
			#		add_to_variable = { THIS.db_state_debt_base = 1 }
			#	}
			#	else = {
			#		clear_variable = THIS.db_state_debt_base
			#	}
			#	db_state_consumer_debt_savings_initialize_overflow_value = yes
			#}	
		}
	}
	
	on_daily = {
		effect = {
			every_country = {
			#LPFR CALCULATION
				set_variable = { THIS.db_national_lfpr = THIS.db_national_lfpr_base }
				add_to_variable = { THIS.db_national_lfpr = THIS.db_national_lfpr_modifier }
				every_owned_state = {
					set_variable = { THIS.db_state_lfpr = THIS.state_population_k }
					multiply_variable = { THIS.db_state_lfpr = PREV.db_national_lfpr }
				}
			}
		}
	}
	
	
	on_daily = {
		effect = {
			every_country = { #calculate total jobs base + military
			
			#CALCULATE MANPOWER RATIO PER STATE
				set_variable = { THIS.db_deployed_manpower_ratio = THIS.deployed_army_manpower_k }
				add_to_variable = { THIS.db_deployed_manpower_ratio = THIS.deployed_navy_manpower_k }
				add_to_variable = { THIS.db_deployed_manpower_ratio = THIS.deployed_airforce_manpower_k }
				divide_variable = { THIS.db_deployed_manpower_ratio = THIS.max_available_manpower_k }
				
			#CALCULATE MILITARY JOBS PER STATE
				every_state = { #set_military_jobs
					limit = { is_owned_by = PREV }
					set_variable = { THIS.db_state_military_jobs = THIS.state_population_k }
					multiply_variable = { THIS.db_state_military_jobs = PREV.modifier@conscription }
					multiply_variable = { THIS.db_state_military_jobs = PREV.db_deployed_manpower_ratio }
					set_variable = { THIS.db_state_total_employed = THIS.db_state_base_total_employed }#calculate total employed base + military
					add_to_variable = { THIS.db_state_total_employed = THIS.db_state_military_jobs }
				}
				
				
				every_state = {
					limit = { is_owned_by = PREV }
					
				# CALCULATE JOBS BASED ON FACTORIES
					set_variable = { THIS.db_state_employment_modifier = 1 }
					add_to_variable = { THIS.db_state_employment_modifier = THIS.non_damaged_building_level@arms_factory }
					add_to_variable = { THIS.db_state_employment_modifier = THIS.non_damaged_building_level@industrial_complex }
					add_to_variable = { THIS.db_state_employment_modifier = THIS.non_damaged_building_level@dockyard }
					divide_variable = { THIS.db_state_employment_modifier = THIS.modifier@local_building_slots } #should read between 1 and 0
					clamp_variable = { 
						var = THIS.db_state_employment_modifier 
						min = 0 
						max = 1 
					} 
					#between no and double employment
					
				# CALCULATE JOBS BASED ON FACTORY OUTPUT 
					set_variable = { THIS.db_industrial_capacity = PREV.modifier@industrial_capacity_factory }
					add_to_variable = { THIS.db_state_employment_modifier = PREV.modifier@industrial_capacity_dockyard }
					add_to_variable = { THIS.db_state_employment_modifier = THIS.db_industrial_capacity }
					divide_variable = { THIS.db_state_employment_modifier = 2 }
					clamp_variable = { var = THIS.db_state_employment_modifier min = 0 max = 0.99 }
					
				# CALCULATE UNEMPLOYMENT
					set_variable = { THIS.db_state_total_unemployed = THIS.db_state_lfpr }
					subtract_from_variable = { THIS.db_state_total_unemployed = THIS.db_state_total_employed }
				
				# CALCULATE JOBS ADDED FROM EMPLOYMENT MODIFIER
					set_variable = { THIS.db_state_total_added_jobs = THIS.db_state_total_unemployed }
					multiply_variable = { THIS.db_state_total_added_jobs = THIS.db_state_employment_modifier }
					add_to_variable = { THIS.db_state_total_employed = THIS.db_state_total_added_jobs }
					subtract_from_variable = { THIS.db_state_total_unemployed = THIS.db_state_total_added_jobs }
					
				# CALCULATE UNEMPLOYMENT RATE 
					set_variable = { THIS.db_state_unemployed_percent = THIS.db_state_total_unemployed }
					divide_variable = { THIS.db_state_unemployed_percent = THIS.db_state_lfpr }
					
				# CLAMP UNEMPLOYMENT RATES
					clamp_variable = {
						var = THIS.db_state_total_unemployed
						min = 0
						max = THIS.db_state_lfpr
					}
					clamp_variable = {
						var = THIS.db_state_total_employed
						min = 0
						max = THIS.db_state_lfpr
					}
				}
			}
		}
	}

	on_weekly = { #CALCULATE WAGES
		effect = {
			every_country = {
				every_owned_state = {
					#limit = { is_controlled_by = PREV }
					
				# SET BASE WAGE 
					set_variable = { THIS.db_state_salary_total = PREV.db_national_minimum_wage }
					multiply_variable = { THIS.db_state_salary_total = PREV.db_national_work_hours_per_day }
					multiply_variable = { THIS.db_state_salary_total = THIS.db_state_base_cost_of_living_modifier }
					
				# MODIFY BASE WAGE BY UNEMPLOYMENT AND NATIONAL MODIFIERS
					set_variable = { THIS.db_state_salary_total_modifier = 0 }
					add_to_variable = { THIS.db_state_salary_total_modifier = THIS.db_state_base_wage_modifier }
					add_to_variable = { THIS.db_state_salary_total_modifier = THIS.db_state_total_unemployed_percent }
					divide_variable = {	THIS.db_state_salary_total_modifier = 2 }
					clamp_variable = { var = THIS.db_state_salary_total_modifier min = 0.1 max = 1 }
					multiply_variable = { THIS.db_state_salary_total = THIS.db_state_salary_total_modifier }
					clamp_variable = { 
						var = THIS.db_state_salary_total_modifier 
						min = var:PREV.db_national_minimum_wage 
						max = 9999999 
					}
					
				# CALCULATE DAILY WAGE PER CAPITA AND TOTAL DAILY INCOME
					set_variable = { THIS.db_state_daily_wage = THIS.db_state_salary_total }
					set_variable = { THIS.db_state_salary_average_per_capita = db_state_daily_wage }
					multiply_variable = { THIS.db_state_salary_average_per_capita = 365 }
					multiply_variable = { THIS.db_state_salary_total = db_state_total_employed }
					
				# CALCULATE TOTAL DAILY INCOME AND YEARLY SALARY
					set_variable = { THIS.db_state_daily_income_total = THIS.db_state_salary_total }
					set_variable = { THIS.db_state_taxes_raised = THIS.db_state_daily_income_total }
					multiply_variable = { THIS.db_state_taxes_raised = PREV.db_national_taxation_rate }
					subtract_from_variable = { THIS.db_state_daily_income_total = THIS.db_state_taxes_raised }
					set_variable = { THIS.db_state_daily_wage_total = THIS.db_state_salary_total }
					multiply_variable = { THIS.db_state_salary_total = 365 }
				}
			}
		}
	}
	
	on_weekly = {
		effect = { #Inflation and Prices Calculation
			every_country = {
			
			# PRICE RATES
				set_variable = { THIS.db_national_price_rate = 1 }
				set_variable = { THIS.db_national_supply = THIS.modifier@consumer_goods_expected_value } #supply
				add_to_variable = { THIS.db_national_supply = THIS.modifier@consumer_goods_factor }
				
			# CALCULATE CONSUMER GOODS DEMAND BASED ON PRICES
				set_variable = { THIS.db_national_consumer_goods_cost = THIS.db_national_supply }
				multiply_variable = { THIS.db_national_consumer_goods_cost = -50 } #scale of consumer goods %:resources consumed
				clamp_variable = { var = THIS.db_national_consumer_goods_cost min = -999 max = 0 }
				
			# CALCULATE CONSUMER GOODS DEMAND BASED ON UNSPENT INCOME
				set_variable = { THIS.db_national_demand = 0 }
				every_owned_state = {
					add_to_variable = { PREV.db_national_demand = THIS.db_state_consumer_goods_demand }
				}
				divide_variable = { THIS.db_national_demand = THIS.num_owned_controlled_states }
				
			# CALCULATE CONSUMER GOODS PRODUCTION EFFICIENCY
				db_economic_calculate_consumer_goods_production_efficiency_totals = yes
				add_to_variable = { THIS.db_consumer_goods_production_efficiency = THIS.modifier@industrial_capacity_factory } #factory output modifies consumer good efficiency
				
			# CALCULATE REAL PRICE RATE
				add_to_variable = { THIS.db_national_price_rate = THIS.db_national_demand }
				subtract_from_variable = { THIS.db_national_price_rate = THIS.db_national_supply }
				multiply_variable = { THIS.db_national_price_rate = THIS.db_consumer_goods_production_efficiency }
				clamp_variable = {
					var = THIS.db_national_price_rate
					min = 0.05
					max = 10
				}
				set_variable =  { THIS.db_national_price_rate_add_to_total = THIS.db_national_price_rate }
				divide_variable = { THIS.db_national_price_rate_add_to_total = 365 }
				# event db_hidden.9 runs this effect: add_to_variable = { THIS.db_national_price_total = THIS.db_national_price_rate_add_to_total }
				
			# CALCULATE PRICE EFFECT ON CONSUMER SPENDING 
				set_variable = { THIS.db_national_price_consumer_spending_offset = 1 }
				subtract_from_variable = { THIS.db_national_price_consumer_spending_offset = THIS.db_national_price_rate }
				divide_variable = { THIS.db_national_price_consumer_spending_offset = 365 }
				
			# CALCULATE INCREASED DEMAND FOR CONSUMER GOODS
				set_variable = { THIS.db_consumer_demand_var = THIS.db_national_daily_income_total }
				set_variable = { THIS.db_consumption_supply = THIS.db_national_total_daily_consumer_spending_total }
				divide_variable = { THIS.db_consumer_demand_var = THIS.db_consumption_supply }
				subtract_from_variable = { THIS.db_consumer_demand_var = 1 }
				
			# CALCULATE INFLATION RATE
				set_variable = { THIS.db_national_inflation_rate = THIS.db_national_price_rate }
				divide_variable = { THIS.db_national_inflation_rate = 100 }
				set_variable = { THIS.db_national_inflation_rate_yearly = THIS.db_national_inflation_rate }
				divide_variable = { THIS.db_national_inflation_rate = 365 }
				multiply_variable = { THIS.db_national_inflation_rate_yearly = 365 }
				
			#ADD INFLATION RATE TO COST OF LIVING
				every_owned_state = { 
					set_variable = { THIS.db_state_cost_of_living = THIS.db_state_base_cost_of_living_modifier }
					add_to_variable = { THIS.db_state_cost_of_living = PREV.db_national_inflation_since_1936 }					
				}
				
			# CALCULATE INTEREST RATES
				set_variable = { THIS.db_national_interest_rate = THIS.db_national_interest_rate_base }
				set_variable = { THIS.db_national_interest_rate_modifier = 0 }
				multiply_variable = { THIS.db_national_interest_rate = THIS.db_national_inflation_since_1936 }
				add_to_variable = { THIS.db_national_interest_rate = THIS.db_national_interest_rate_modifier }
			
			#NATIONAL JOB GROWTH RATE
				#set_variable = { THIS.db_national_job_growth_rate = THIS.db_national_demand }
				#divide_variable = { THIS.db_national_job_growth_rate = 1000 } #make inflation slow
				#add_to_variable = { THIS.db_national_lfpr_base = THIS.db_national_job_growth_rate }
				#clamp_variable = { var = THIS.db_national_lfpr_base min = .1 max = .99 }
			}
		}
	}

	on_daily = {
		effect = {
			every_country = {
				every_owned_state = {	
					
				#BASE SPENDING ON FOOD
					set_variable = { THIS.db_state_consumer_spending_base_food = 0.3 }
					add_to_variable = { THIS.db_state_consumer_spending_base_food = PREV.db_national_consumer_goods_food_modifier }
					#multiply_variable = { THIS.db_state_consumer_spending_base_food = PREV.db_national_inflation_since_1936 }
					
				#BASE SPENDING ON HOUSING
					set_variable = { THIS.db_state_consumer_spending_base_housing = 0.28 } #housing comes after
					multiply_variable = { THIS.db_state_consumer_spending_base_clothing = THIS.db_state_cost_of_living }
					add_to_variable = { THIS.db_state_consumer_spending_base_housing = PREV.db_national_consumer_goods_housing_modifier }
					
				#BASE SPENDING ON CLOTHING/RECREATION/APPLIANCES
					set_variable = { THIS.db_state_consumer_spending_base_clothing = 0.15 }
					multiply_variable = { THIS.db_state_consumer_spending_base_clothing = THIS.db_state_base_cost_of_living_modifier }
					#multiply_variable = { THIS.db_state_consumer_spending_base_clothing = PREV.db_national_inflation_since_1936 }
					add_to_variable = { THIS.db_state_consumer_spending_base_clothing = PREV.db_national_consumer_goods_clothing_modifier }
					
				#BASE SPENDING ON MEDICAL
					set_variable = { THIS.db_state_consumer_spending_base_medical = 0.06 }
					add_to_variable = { THIS.db_state_consumer_spending_base_medical = PREV.db_national_consumer_goods_medical_modifier }
					multiply_variable = { THIS.db_state_consumer_spending_base_medical = THIS.db_state_base_cost_of_living_modifier }
					#multiply_variable = { THIS.db_state_consumer_spending_base_medical = PREV.db_national_inflation_since_1936 }
					
				#BASE SPENDING ON DEBT REPAYMENT
					if = { 
						limit = { 
							#check_variable = { THIS.db_state_consumer_debt_savings_per_capita < 0 } 
							#check_variable = { THIS.db_state_consumer_debt_savings < 0 }
						}
						set_variable = { THIS.db_state_consumer_spending_base_debt = THIS.db_consumer_debt_per_capita }
						add_to_variable = { THIS.db_state_consumer_spending_base_debt = THIS.db_state_salary_average_per_capita }
						divide_variable = { THIS.db_state_consumer_spending_base_debt = PREV.db_national_inflation }
						divide_variable = { THIS.db_state_consumer_spending_base_debt = -4000 }
						clamp_variable = { 
							var = THIS.db_state_consumer_spending_base_debt
							max = .5
							min = 0
						}
					}
					
				#CALCULATE PERCENTAGE OF INCOME SPENT DAILY
					set_variable = { THIS.db_state_daily_consumer_spending_percentage_of_income = 0 }
					add_to_variable = { THIS.db_state_daily_consumer_spending_percentage_of_income = THIS.db_state_consumer_spending_base_food }
					add_to_variable = { THIS.db_state_daily_consumer_spending_percentage_of_income = THIS.db_state_consumer_spending_base_debt }
					add_to_variable = { THIS.db_state_daily_consumer_spending_percentage_of_income = THIS.db_state_consumer_spending_base_medical }
					add_to_variable = { THIS.db_state_daily_consumer_spending_percentage_of_income = THIS.db_state_consumer_spending_base_clothing }
					add_to_variable = { THIS.db_state_daily_consumer_spending_percentage_of_income = THIS.db_state_consumer_spending_base_housing }
					add_to_variable = { THIS.db_state_daily_consumer_spending_percentage_of_income = PREV.db_national_price_consumer_spending_offset_total }
					set_variable = { THIS.db_state_daily_consumer_spending_base = 1 }
					subtract_from_variable = { THIS.db_state_daily_consumer_spending_base = THIS.db_state_daily_consumer_spending_percentage_of_income }
					
				#CALCULATE DEMAND BASED ON INCOME NOT SPENT
					set_variable = { THIS.db_state_consumer_goods_demand = THIS.db_state_daily_consumer_spending_base }
					
				#DISPLAY AMOUNT OF INCOME SAVED AFTER SPENDING
					set_variable = { THIS.db_state_total_daily_savings = db_state_daily_consumer_spending_base }
					multiply_variable = { THIS.db_state_total_daily_savings = THIS.db_state_daily_wage }
					multiply_variable = { THIS.db_state_total_daily_savings = THIS.db_state_lfpr }
					
				#CALCULATE CONSUMER SPENDING PER CAPITA
					set_variable = { THIS.db_state_total_daily_consumer_spending_per_capita = THIS.db_state_daily_consumer_spending_percentage_of_income }
					multiply_variable = { THIS.db_state_total_daily_consumer_spending_per_capita = THIS.db_state_daily_wage }
				
				#SCALE TO ECONOMY 
					set_variable = { THIS.db_state_total_daily_consumer_spending_total = THIS.db_state_total_daily_consumer_spending_per_capita }
					multiply_variable = { THIS.db_state_total_daily_consumer_spending_total = THIS.db_state_lfpr }
					set_variable = { THIS.db_state_total_daily_consumer_spending_total_scaled = db_state_total_daily_consumer_spending_total }
					
				#CALCULATE TOTAL AMOUNT OF DEBT PAID OFF DAILY
					set_variable = { THIS.db_state_daily_debt_paid_off = THIS.db_state_consumer_spending_base_debt }
					multiply_variable = { THIS.db_state_daily_debt_paid_off = -1 }
					multiply_variable = { THIS.db_state_daily_debt_paid_off = THIS.db_state_daily_wage }
					multiply_variable = { THIS.db_state_daily_debt_paid_off = THIS.db_state_lfpr }
					
				#CALCULATE DAILY NET INCOME
					set_variable = { THIS.db_state_daily_net_income = THIS.db_state_daily_income_total }
					add_to_variable = { THIS.db_state_daily_net_income = THIS.db_state_daily_debt_paid_off }
					subtract_from_variable = { THIS.db_state_daily_net_income = THIS.db_state_total_daily_consumer_spending_total }
				}
			}
		}
	}
	
	on_daily = {
		effect = {
		#CALCULATE NATIONAL ECONOMIC DATA BASED ON STATES
			every_country = {
				set_variable = { THIS.db_national_daily_wage_average = 0 }
				set_variable = { THIS.db_national_unemployment_rate = 0 }
				set_variable = { THIS.db_national_daily_income_total = 0 }
				set_variable = { THIS.db_national_total_daily_consumer_spending_total = 0 }
				set_variable = { THIS.db_national_net_consumer_income_total = 0 }
				set_variable = { THIS.db_national_daily_taxes_raised = 0 }
				set_variable = { THIS.db_national_daily_debt_paid_off = 0 }
				set_variable = { THIS.db_national_total_daily_savings = 0 }
				set_variable = { THIS.db_national_consumer_debt_per_capita_average = 0 }
				every_owned_state = {
					add_to_variable = { PREV.db_national_daily_income_total = THIS.db_state_daily_income_total }
					add_to_variable = { PREV.db_national_unemployment_rate = THIS.db_state_unemployed_percent }
					add_to_variable = { PREV.db_national_daily_wage_average = THIS.db_state_daily_wage }
					add_to_variable = { PREV.db_national_total_daily_consumer_spending_total = THIS.db_state_total_daily_consumer_spending_total }
					add_to_variable = { PREV.db_national_net_consumer_income_total = db_state_daily_net_income }
					add_to_variable = { PREV.db_national_daily_taxes_raised = THIS.db_state_taxes_raised }
					add_to_variable = { PREV.db_national_consumer_debt_per_capita_average = THIS.db_consumer_debt_per_capita }
					add_to_variable = { PREV.db_national_daily_debt_paid_off = THIS.db_state_daily_debt_paid_off }
					add_to_variable = { PREV.db_national_total_daily_savings = THIS.db_state_total_daily_savings }
				}
				subtract_from_variable = { THIS.db_national_total_daily_consumer_spending_total = THIS.db_national_daily_debt_paid_off }
				divide_variable = { THIS.db_national_daily_wage_average = THIS.num_owned_controlled_states }
				divide_variable = { THIS.db_national_consumer_debt_per_capita_average = THIS.num_owned_controlled_states }
				divide_variable = { THIS.db_national_unemployment_rate = THIS.num_owned_controlled_states }	
			}			
		}
	}
	
}