on_actions = {
	# country
	##on_startup = {
    #    effect = {
    #        ROOT = { db_startup_set_state_governor_1 = yes }
    #    }
    #}
	on_startup = {
		effect = {
			every_state = {
				limit = {
					is_controlled_by = ROOT
				}
				add_to_array = {
					array = ROOT.controlled_state_ids
					value = THIS.id
				}
			}
		}
	}

	on_weekly = {
		effect = {
			every_state = {
				limit = {
					is_controlled_by = ROOT
				}
			add_to_array = {
				array = ROOT.controlled_state_ids
				value = THIS.id
			}
		}
		if = {
			limit = {
				any_state = {
					limit = { NOT = { is_controlled_by = ROOT } }
					is_in_array = {
						array = ROOT.controlled_state_ids
						value = THIS.id
					}
					remove_from_array = {
						array = ROOT.controlled_state_ids
						value = THIS.id
					}
				}
			}
		}
	}

	on_startup = {
		effect = {
			set_variable = {
				var = total_state_conservative
				value = 0
			}
			set_variable = {
				var = total_state_liberal
				value = 0
			}
			set_variable = {
				var = total_state_neutrality
				value = 0
			}
			set_variable = {
				var = total_state_communism
				value = 0
			}
			set_variable = {
				var = total_state_fascism
				value = 0
			}
			for_each_scope_loop = {
				array = ROOT.controlled_state_ids
				set_temp_variable = {
					var = governor_chance_democratic
					value = party_popularity_100@democratic	
				}
				set_temp_variable = {
					var = governor_chance_neutrality
					value = party_popularity_100@neutrality
				}
				set_temp_variable = {
					var = governor_chance_communism
					value = party_popularity_100@communism
				}
				set_temp_variable = {
					var = governor_chance_fascism
					value = party_popularity_100@fascism
				}
				random_list = {
					var:governor_chance_democratic = {
						random_list = {
							10 = {
								db_effect_state_set_conservative = yes
								modifier = { factor = 2 has_country_leader_ideology = conservatism }
								generate_character = {
									token_base = PREV.governor # token will be TAG_token_base
									advisor = {
										slot = political_advisor
										traits = { liberal_governor }
										available = {
											PREV = { has_state_flag = db_state_conservative }
											ROOT = { controls_state = PREV }	
										}
									}		
									portraits = { 
										army = { small = GFX_idea_generic_fascist_demagogue }
									}
								}
							}
							10 = {
								db_effect_state_set_liberal = yes
								modifier = { factor = 2 has_country_leader_ideology = liberalism }
								generate_character = {
									token_base = PREV.governor # token will be TAG_token_base
									advisor = {
										slot = political_advisor
										traits = { liberal_governor }
										available = {
											PREV = { has_state_flag = state_1_neutral }
											ROOT = { controls_state =  PREV }	
										}
									}		
									portraits = { 
										army = { small = GFX_idea_generic_fascist_demagogue }
									}
								}
							}
						}
					}
					var:governor_chance_neutrality = {
						db_effect_state_set_neutral = yes
						generate_character = {
							token_base = PREV.governor # token will be TAG_token_base
							advisor = {
								slot = political_advisor
									traits = { neutral_governor }
									available = {
										PREV = { has_state_flag = db_state_neutrality }
										ROOT = { controls_state =  PREV }
									}
								}		
							portraits = { 
								army = { small = GFX_idea_generic_fascist_demagogue }
							}
						}
					}	
					var:governor_chance_communism = {
						db_effect_state_set_communism = yes
						generate_character = {
							token_base = PREV.governor # token will be TAG_token_base
							advisor = {
								slot = political_advisor
									traits = { communist_governor }
									available = {
										PREV = { has_state_flag = db_state_communist }
										ROOT = { controls_state =  PREV }
									}
								}		
							portraits = { 
								army = { small = GFX_idea_generic_fascist_demagogue }
							}
						}
					}
					var:governor_chance_fascism = {
						db_effect_state_set_neutral = yes
						generate_character = {
							token_base = PREV.governor # token will be TAG_token_base
							advisor = {
								slot = political_advisor
									traits = { fascist_governor }
									available = {
										PREV = { has_state_flag = db_state_fascist }
										ROOT = { controls_state =  PREV }
									}
								}		
							portraits = { 
								army = { small = GFX_idea_generic_fascist_demagogue }
							}
						}
					}
				}
			}
		}
	}
}