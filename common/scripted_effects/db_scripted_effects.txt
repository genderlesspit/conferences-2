#	Example:
#
#	example_effect = {
#		add_political_power = 66
#		add_popularity = {
#			ideology = fascism
#			popularity = 0.33
#		}
#	}
#
#
#	In a script file:
#
#	effect = {
#		example_effect = yes
#	}
#
#
#Country scope
#ROOT_inherit_current_scope_wars_effect = {
#	custom_effect_tooltip = ROOT_inherit_current_scope_wars_effect
#	hidden_effect = {
#		every_country = {
#			limit = {
#				has_defensive_war_with = PREV
#			}
#			ROOT = { declare_war_on = { target = PREV type = annex_everything } }
#		}
#		every_country = {
#			limit = {
#				has_offensive_war_with = PREV
#			}
#			declare_war_on = { target = ROOT type = annex_everything }
#		}
#	}
#}

db_effect_anti_war_activity = {
	modify_timed_idea = {
		idea = db_anti_war_movement	
		days = 35
	}
	if = {
		limit = { has_decision = impending_leadership_collapse }
		add_days_remove  = {
			decision = impending_leadership_collapse
			days = -15
		}		
	}
}

db_effect_anti_war_activity_decision = {
	if = { 
		limit = { has_idea = db_anti_war_movement } 
		hidden_effect = { activate_decision = anti_war_activity }
		random_owned_controlled_state = {
			limit = { has_state_flag = db_anti_war_movement_presence }
			save_event_target_as = anti_war_movement_state
		}
		random_list = {
			30 = {#antiwar movement spreads
				country_event = political_crisis.6
			}
			10 = {
				country_event = political_crisis.4
			}
			10 = {
				country_event = political_crisis.9 
			}
			10 = {
				country_event = political_crisis.10 
			}
			10 = {
				country_event = political_crisis.11
			}
			10 = {
				country_event = political_crisis.13
			}
			10 = {
				country_event = political_crisis.14
			}
			20 = {
				modifier = {
					factor = 10
					has_country_flag = db_anti_war_movement_satisfied
				}
				modifier = {
					factor = 0
					has_country_flag = db_anti_war_movement_dissatisfied
				}
				modifier = {
					factor = 0
					has_country_leader_with_trait = db_incompetent
				}
			}
		}
	}
}


db_effect_spread_anti_war_movement = {
	random_state = {
		limit = { has_event_target = anti_war_movement_state any_neighbor_state = { has_state_flag = db_anti_war_movement_presence } }
		set_state_flag = db_anti_war_movement_presence
		add_dynamic_modifier = {
				modifier = anti_war_movement_state_dynamic_modifier
			days = 365 # optional, will be removed after this many days passes
		}
	}
	modify_timed_idea = {
		idea = db_anti_war_movement	
		days = 35
	}
	if = {
		limit = { has_decision = impending_leadership_collapse }
		add_days_remove  = {
			decision = impending_leadership_collapse
			days = -15
		}
		
	}
}

db_trait_hawk_chance = {
		random_list = {
		10 = {
			country_event = gain_traits.1
		}
		90 = { }
	}
}

db_trait_incompetent_chance = {
		random_list = {
		10 = {
			modifier = {
				factor = 1.5
				has_political_power < 150 
			}
			modifier = {
				factor = 2
				has_political_power < 50 
			}
			modifier = {
				factor = 5
				has_political_power < 0 
			}
			country_event = gain_traits.2
		}
		90 = { }
	}
}


db_effect_diplomatic_mishap_small = {
		random_list = {
		100 = {
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 0 
				}
			}
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 25
				}
			}
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 50
				}
			}
			modifier = {
				factor = 0
				has_opinion = {
					target = FROM
					value > 99 
				}
			}
			add_opinion_modifier = { 
				target = FROM
				modifier = db_opinion_diplomatic_mishap_small
			}
		}
		1 = { }
	}
}

db_effect_diplomatic_mishap_medium = {
		random_list = {
		70 = {
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 0 
				}
			}
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 25
				}
			}
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 50
				}
			}
			modifier = {
				factor = 0
				has_opinion = {
					target = FROM
					value > 99 
				}
			}
			add_opinion_modifier = { 
				target = FROM
				modifier = db_opinion_diplomatic_mishap_small
			}
		}
		29 = { 			
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 0 
				}
			}
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 25
				}
			}
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 50
				}
			}
			modifier = {
				factor = 0
				has_opinion = {
					target = FROM
					value > 99 
				}
			}
			add_opinion_modifier = { 
				target = FROM
				modifier = db_opinion_diplomatic_mishap_small
			}
		}
		1 = { }
	}
}

db_effect_diplomatic_mishap_large = {
		random_list = {
		70 = {
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 0 
				}
			}
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 25
				}
			}
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 50
				}
			}
			modifier = {
				factor = 0
				has_opinion = {
					target = FROM
					value > 99 
				}
			}
			add_opinion_modifier = { 
				target = FROM
				modifier = db_opinion_diplomatic_mishap_large
			}
		}
		29 = { 			
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 0 
				}
			}
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 25
				}
			}
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 50
				}
			}
			modifier = {
				factor = 0
				has_opinion = {
					target = FROM
					value > 99 
				}
			}
			add_opinion_modifier = { 
				target = FROM
				modifier = db_opinion_diplomatic_mishap_medium
			}
		}
		1 = { }
	}
}

db_effect_diplomatic_mishap_irreperable = {
		random_list = {
		70 = {
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 0 
				}
			}
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 25
				}
			}
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 50
				}
			}
			modifier = {
				factor = 0
				has_opinion = {
					target = FROM
					value > 99 
				}
			}
			add_opinion_modifier = { 
				target = FROM
				modifier = db_opinion_diplomatic_mishap_irreperable
			}
		}
		29 = { 			
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 0 
				}
			}
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 25
				}
			}
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 50
				}
			}
			modifier = {
				factor = 0
				has_opinion = {
					target = FROM
					value > 99 
				}
			}
			add_opinion_modifier = { 
				target = FROM
				modifier = db_opinion_diplomatic_mishap_large
			}
		}
		1 = { }
	}
}

db_effect_paramilitary_activity_decision = {
	if = { 
		limit = { has_idea = db_paramilitary_movement } 
		hidden_effect = { activate_decision = paramilitary_activity }
		random_owned_controlled_state = {
			limit = { has_state_flag = db_paramilitary_movement_presence }
			save_event_target_as = paramilitary_movement_state
		}
		random_list = {
			30 = {#paramilitary movement spreads
				country_event = political_crisis.25
			}
			10 = { #clash with anti-war protestors
				modifier = {
					factor = 0
					NOT = { event_target:paramilitary_movement_state = { has_state_flag = db_anti_war_movement_presence } }
				}
				if = { limit = { event_target:paramilitary_movement_state = { has_state_flag = db_anti_war_movement_presence } }
				country_event = political_crisis.26 }
			}
			10 = {
				modifier = {
					factor = 0
					NOT = { has_country_flag = db_paramilitary_politicans }
				}
				if = { limit = { NOT = { has_country_flag = db_paramilitary_politicans } } country_event = political_crisis.29 }
			}
			10 = {
				modifier = {
					factor = 0
					event_target:paramilitary_movement_state = { any_neighbor_state = { NOT = { is_controlled_by = ROOT } } }
				}
				if = { 
					limit = { 
						event_target:paramilitary_movement_state = { 
							any_neighbor_state = { 
								NOT = { is_controlled_by = ROOT } 
							} 
						}
					}
					country_event = political_crisis.30 #Border Crossing
					event_target:paramilitary_movement_state = { 
						if = { 
							limit = { 
								any_neighbor_state = {  
									NOT = { is_controlled_by = ROOT } 
								} 
							} 
							save_event_target_as = border_skirmish_state 
						} 
					}
				random_state = {
					limit = { has_event_target = border_skirmish_state }
					set_state_flag = { flag = border_skirmish_state_flag days = 60 }
				}
			}
			}
			10 = {
				country_event = political_crisis.31 #intimidate opposition
			}
			60 = {
				modifier = {
					factor = 0
					event_target:paramilitary_movement_state = { has_state_flag = border_skirmish_state_flag }
				}
				if = { 
					limit = { event_target:paramilitary_movement_state = { any_neighbor_state = { NOT = { is_controlled_by = ROOT } has_state_flag = border_skirmish_state_flag_flag } } }
					country_event = political_crisis.34 #Border Crossing
					event_target:paramilitary_movement_state = { random_neighbor_state = { limit = { has_state_flag = border_skirmish_state_flag_flag NOT = { is_controlled_by = ROOT } } save_event_target_as = border_skirmish_state } }
					every_country = { limit = { controls_state = border_skirmish_state } country_event = political_crisis.34 }
				}
			}
			20 = {
				#modifier = {
				#	factor = 10
				#	has_country_flag = db_anti_war_movement_satisfied
				#}
				#modifier = {
				#	factor = 0
				#	has_country_flag = db_anti_war_movement_dissatisfied
				#}
				#modifier = {
				#	factor = 0
				#	has_country_leader_with_trait = db_incompetent
				#}
			}
		}
	}
}

db_effect_spread_paramilitary_movement = {
	random_state = {
		limit = { has_event_target = anti_war_movement_state any_neighbor_state = { has_state_flag = db_anti_war_movement_presence } }
		set_state_flag = db_anti_war_movement_presence
		add_dynamic_modifier = {
				modifier = anti_war_movement_state_dynamic_modifier
			days = 365 # optional, will be removed after this many days passes
		}
	}
	modify_timed_idea = {
		idea = db_paramilitary_movement	
		days = 35
	}
	if = {
		limit = { has_decision = impending_leadership_collapse }
		add_days_remove  = {
			decision = impending_leadership_collapse
			days = -15
		}
		
	}
}

db_effect_paramilitary_activity = {
	modify_timed_idea = {
		idea = db_paramilitary_movement	
		days = 35
	}
	if = {
		limit = { has_decision = impending_leadership_collapse }
		add_days_remove  = {
			decision = impending_leadership_collapse
			days = -15
		}		
	}
}

db_effect_paramilitary_escalation = {
	news_event = political_crisis.33
	modify_timed_idea = {
		idea = db_paramilitary_movement	
		days = 365
	}
	if = {
		limit = { has_decision = impending_leadership_collapse }
		add_days_remove  = {
			decision = impending_leadership_collapse
			days = -50
		}		
	}
	
}

